<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NA • harsat</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet"><meta property="og:title" content="NA"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">harsat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.1006</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="articles/harsat.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Data file management</h6></li>
    <li><a class="dropdown-item" href="articles/file-management.html">File locations</a></li>
    <li><a class="dropdown-item" href="articles/reference-file-formats.html">Reference file formats</a></li>
    <li><a class="dropdown-item" href="articles/external-file-format.html">External file format</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Examples</h6></li>
    <li><a class="dropdown-item" href="articles/example_HELCOM.html">HELCOM (read first)</a></li>
    <li><a class="dropdown-item" href="articles/example_OSPAR.html">OSPAR</a></li>
    <li><a class="dropdown-item" href="articles/example_external_data.html">AMAP external data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional resources</h6></li>
    <li><a class="dropdown-item" href="articles/datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="articles/report-template.html">Report template</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/osparcomm/HARSAT/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NA</h1>
      <small class="dont-index">Source: <a href="https://github.com/osparcomm/HARSAT/blob/develop/CHANGES.md" class="external-link"><code>CHANGES.md</code></a></small>
    </div>

<div class="section level2">
<h2 id="change-log">Change log<a class="anchor" aria-label="anchor" href="#change-log"></a></h2>
<div class="section level3">
<h3 id="version-102">Version 1.0.2<a class="anchor" aria-label="anchor" href="#version-102"></a></h3>
<p>This release is that used to run the OSPAR 2024 CEMP assessment.</p>
<div class="section level4">
<h4 id="weighted-sums-for-teqs-etc">Weighted sums for TEQs etc.<a class="anchor" aria-label="anchor" href="#weighted-sums-for-teqs-etc"></a></h4>
<p>Weighted sums of concentrations are now calculated using <code>determinand.link.sum</code>. The weights are supplied using the <code>weights</code> argument. This function supersedes <code>determinand.link.TEQDFP</code> which is now deprecated and will be removed at the next release.</p>
<p>Updated and corrected World Health Organisation TEFs for dioxins, furans and planar PCBs are now available in the data object <code>info_TEF</code>: there are four versions available:</p>
<ul><li>DFP_2005; the 2005 values<br></li>
<li>DFP_2022; the 2022 values<br></li>
<li>DFP_HOLAS3; the values used in the HOLAS3 assessment; these are the 2005 values excluding three PCBs and are included for backward compatibility<br></li>
<li>DFP_CEMP; the values used in CEMP assessments &lt;= 2024; these are the 2005 values excluding three PCBs and with the TEF for CDFO ten times too small; they are included for backward compatibility</li>
</ul><p>DFP_2005 and DFP_2022 use determinand OCDF (the correct code) rather than CDFO (which is a grouped determinand code).</p>
</div>
<div class="section level4">
<h4 id="auxiliary-variables">Auxiliary variables<a class="anchor" aria-label="anchor" href="#auxiliary-variables"></a></h4>
<p>Key auxiliary variables can now be plotted in <code>plot_assessment</code>. The default variables are:</p>
<ul><li>biota: concentration, LNMEA, DRYWT%, LIPIDWT%<br></li>
<li>sediment: non-normalised concentration, normalised concentration, AL, CORG<br></li>
<li>water: no plots are currently produced</li>
</ul><p>The choice of auxiliary variables can be altered using the <code>auxiliary</code> argument, although the options here are still limited.</p>
<p>The merging of auxiliary variables with the data is now controlled using the <code>control</code> argument of <code>read_data</code>. <code>control$auxiliary$by_matrix</code> is a list which determines which auxiliary variables are merged by sample and matrix and which are just merged by sample. The default values are <code>c("DRYWT%", "LIPIDWT%)</code> for biota and <code>"all"</code> for sediment and water. Thus, by default, dry weight and lipid weight measurements are matched with chemical concentrations in the same tissue (matrix). but all other auxiliary variables in biota are matched at the sample level. For sediment (and water) all auxiliary variables (e.g. aluminium and organic carbon measurements) are matched with chemical concentrations in the same grain size fraction.</p>
</div>
<div class="section level4">
<h4 id="reporting">Reporting<a class="anchor" aria-label="anchor" href="#reporting"></a></h4>
<p><code>report_assessment</code> now has the full functionality required for the OSPAR CEMP assessment. This includes:</p>
<ul><li>scatterplot matrices of concentrations of related compounds using the non-exported function <code>plot_multidata</code><br></li>
<li>plots of assessments of related compounds using the non-exported function <code>plot_multiassessment</code><br></li>
<li>plots of contaminant ratios using the non-exported function <code>plot_ratio</code>
</li>
</ul><p>There is still some work required to make <code>report_assessment</code> suitable for all purposes.</p>
</div>
<div class="section level4">
<h4 id="minor-bug-fixes">Minor bug fixes<a class="anchor" aria-label="anchor" href="#minor-bug-fixes"></a></h4>
<ul><li>ensures that if <code>uncertainty</code> column is present in external data then so is <code>unit_uncertainty</code> and vice versa</li>
<li>
<code>plot_assessment</code> now correctly plots the 90% two-sided confidence intervals on VDSI estimates from imposex assessments</li>
<li>correct treatment of censoring data in <code>determinand.link.sum</code>
</li>
<li>
<code>ctsm.check.sex.biota</code> now works for any auxiliary variable</li>
<li>
<code>get_timeseries</code> now always shows the series identifier for each timeseries</li>
<li>
<code>estimate_uncertainties</code> now traps for the case then <code>DRYWT%</code> and <code>LIPIDWT%</code> are not specified as auxiliary variables</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="version-101">Version 1.0.1<a class="anchor" aria-label="anchor" href="#version-101"></a></h3>
<p>Updates (mostly) required to run the OSPAR 2024 CEMP assessment.</p>
<div class="section level4">
<h4 id="data-import">Data import<a class="anchor" aria-label="anchor" href="#data-import"></a></h4>
<p>For OSPAR and HELCOM style assessments, data from Germany are now matched to stations by name for 2023 onwards. This applies to biota, sediment and water. Note that for HELCOM, biota data from Germany are already matched by name for all years.</p>
</div>
<div class="section level4">
<h4 id="uncertainty-processing">Uncertainty processing<a class="anchor" aria-label="anchor" href="#uncertainty-processing"></a></h4>
<p>harsat 1.0.0 replaced implausibly large relative uncertainties (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">&gt;=</annotation></semantics></math> 100%) and replaced them with imputed values. However, implausibly small relative uncertainties were not changed. The code now replaces relative uncertainties <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">&lt;=</annotation></semantics></math> 1% with imputed values.</p>
<p>The defaults can be changed using <code>control$relative_uncertainty</code> in <code>read_data</code>. To replicate the defaults in harsat 1.0.0, set <code>control$relative_uncertainty = c(0, 100)</code>. To keep all uncertainties, regardless of how ridiculous they are, set <code>control$relative_uncertainty = c(0, Inf)</code>.</p>
<p>Two minor bug fixes:</p>
<ul><li>relative uncertainties were being filtered for all distributional types, but this is only a reliable procedure for determinands with <code>distribution == "lognormal"</code>; the checks are now only applied to lognormal data<br></li>
<li>some biological effect data with distributions other than normal or lognormal were being incorrectly deleted; this has now been corrected</li>
</ul><p>The oddity files have been updated to show:</p>
<ul><li>implausible_uncertainties_reported.csv - all reported uncertainties that are replaced by imputed values<br></li>
<li>missing_uncertainties.csv - all uncertainties (normal or lognormal data) that are not reported and can’t be imputed<br></li>
<li>implausible_uncertaintes_calculated.csv - all uncertainties that are calculated during the data processing (e.g. during normalisation) that are implausible and are set to missing</li>
</ul></div>
<div class="section level4">
<h4 id="uncertainty-coefficients">Uncertainty coefficients<a class="anchor" aria-label="anchor" href="#uncertainty-coefficients"></a></h4>
<p>The function <code>ctsm_uncrt_workup</code> and related supporting functions are used in OSPAR assessments to update the fixed and proportional standard deviations which are subsequently used to impute missing uncertainties. These functions were ignored during the initial development of harsat and are now harsat compatible.</p>
</div>
<div class="section level4">
<h4 id="biological-effect-assessments">Biological effect assessments<a class="anchor" aria-label="anchor" href="#biological-effect-assessments"></a></h4>
<p>Imposex assessments: these are now fully reproducible with seeds for random number generation provided in the calls to <code>ctsm.VDS.cl</code> and <code>assess_imposex</code></p>
<p>Assessment functions for negative binomial data have been added. Negative binomial data includes MNC - the number of micronucleated cells.</p>
</div>
<div class="section level4">
<h4 id="reporting-1">Reporting<a class="anchor" aria-label="anchor" href="#reporting-1"></a></h4>
<p><code>report_assessment</code> generates default file names. These are based on the series identifier with additional station information. It is now possible to override this behaviour for a single report by providing a different file name using the <code>output_file</code> argument.</p>
</div>
<div class="section level4">
<h4 id="reference-tables">Reference tables<a class="anchor" aria-label="anchor" href="#reference-tables"></a></h4>
<ul><li>new values added to method_extraction table</li>
</ul></div>
<div class="section level4">
<h4 id="minor-bug-fixes-1">Minor bug fixes<a class="anchor" aria-label="anchor" href="#minor-bug-fixes-1"></a></h4>
<ul><li>correct behaviour of argument <code>return_early</code> in <code>create_timeseries</code><br></li>
<li>pass <code>info</code> component of the harsat object to <code>determinand.link.sum</code>, <code>determinand.link.replace</code>, and <code>determinand.link.imposex</code><br></li>
<li>ensure early return from <code>ctsm_convert_basis</code> when there is nothing to convert (avoids issues e.g. when all the data are biological effects)<br></li>
<li>ensure SURVT (in pargroup B-BIO) is recognised as a biological effect in <code>ctsm_get_datatype</code> (SURVT is the only determinand in this pargroup that isn’t an auxiliary variable)<br></li>
<li>pass <code>good_status</code> to assessment functions for data with distributions other than normal and lognormal</li>
<li>trap pathological case in estimation of <code>prtrend</code>; see #436</li>
<li>ensure <code>ctsm_OHAT_legends</code> uses the symbology as specified in <code>write_summary_table</code>
</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="version-100">Version 1.0.0<a class="anchor" aria-label="anchor" href="#version-100"></a></h3>
<ul><li>Initial public release</li>
</ul></div>
<div class="section level3">
<h3 id="version-013">Version 0.1.3<a class="anchor" aria-label="anchor" href="#version-013"></a></h3>
<ul><li>Various fixes</li>
</ul></div>
<div class="section level3">
<h3 id="version-012">Version 0.1.2<a class="anchor" aria-label="anchor" href="#version-012"></a></h3>
<ul><li>Fixed issues when packaged; see #326, #328</li>
<li>Updated AMAP data and packaging; see #329</li>
</ul></div>
<div class="section level3">
<h3 id="version-011">Version 0.1.1<a class="anchor" aria-label="anchor" href="#version-011"></a></h3>
<ul><li>Fixed issue with auxiliary variables: see #289</li>
<li>Small documentation improvements</li>
<li>Added build processes for package bundles</li>
</ul></div>
<div class="section level3">
<h3 id="version-010">Version 0.1.0<a class="anchor" aria-label="anchor" href="#version-010"></a></h3>
<ul><li>Initial release</li>
</ul></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Arctic Monitoring and Assessment Programme (AMAP), Helsinki Commission (HELCOM), OSPAR Commission (OSPAR), International Council for the Exploration of the Sea (ICES), AmbieSense Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p><a href="https://creativecommons.org/licenses/by/4.0/" class="external-link"><img class="cc-badge" src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by.png"></a></p>
</div>

    </footer></div>





  </body></html>

