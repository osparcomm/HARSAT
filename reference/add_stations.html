<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Adds the station name and station code to the contaminant data from an ICES
extraction. This is done by either matching the station names submitted with
the data to the station dictionary, or by matching the sample coordinates to
the station dictionary, or a combination of both."><title>Add stations to contaminant data from an ICES extraction — add_stations • harsat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Add stations to contaminant data from an ICES extraction — add_stations"><meta property="og:description" content="Adds the station name and station code to the contaminant data from an ICES
extraction. This is done by either matching the station names submitted with
the data to the station dictionary, or by matching the sample coordinates to
the station dictionary, or a combination of both."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">harsat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/harsat.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Data file management</h6>
    <a class="dropdown-item" href="../articles/file-management.html">File locations</a>
    <a class="dropdown-item" href="../articles/reference-file-formats.html">Reference file formats</a>
    <a class="dropdown-item" href="../articles/external-file-format.html">External file format</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example_HELCOM.html">HELCOM (read first)</a>
    <a class="dropdown-item" href="../articles/example_OSPAR.html">OSPAR</a>
    <a class="dropdown-item" href="../articles/example_external_data.html">AMAP external data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/osparcomm/HARSAT/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Add stations to contaminant data from an ICES extraction</h1>
      <small class="dont-index">Source: <a href="https://github.com/osparcomm/HARSAT/blob/HEAD/R/import_functions.R" class="external-link"><code>R/import_functions.R</code></a></small>
      <div class="d-none name"><code>add_stations.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Adds the station name and station code to the contaminant data from an ICES
extraction. This is done by either matching the station names submitted with
the data to the station dictionary, or by matching the sample coordinates to
the station dictionary, or a combination of both.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_stations</span><span class="op">(</span><span class="va">data</span>, <span class="va">stations</span>, <span class="va">info</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame with the contaminant data from an ICES extraction</p></dd>


<dt>stations</dt>
<dd><p>A data frame with the ICES station dictionary</p></dd>


<dt>info</dt>
<dd><p>A HARSAT information list which must contain the elements
<code>purpose</code>, <code>compartment</code>, and <code>add_stations</code>. The latter is a list of
control parameters supplied through <code>control_default</code> or <code>control_modify</code>
which control how the station matching is achieved. See details.</p></dd>


<dt>compartment</dt>
<dd><p>A string: <code>"biota"</code>, <code>"sediment"</code> or <code>"water"</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame containing the contaminant data augmented by variables
containing the station code and the station name</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>info$add_stations</code> is a list of control parameters that modify the
station matching process:</p><ul><li><p>method: a string specifying whether the stations are matched by <code>"name"</code>,
<code>"coordinates"</code>, or <code>"both"</code>. If <code>info$purpose</code> is <code>"custom"</code>, <code>method</code> is
restricted to either <code>"name"</code> (the default) or <code>"coordinates"</code>. If
<code>info$purpose</code> is <code>"OSPAR"</code>, <code>"HELCOM"</code> or <code>"AMAP"</code>, then method is set to
<code>"both"</code> by default and stations are matched by name or coordinates
according to rules specified by OSPAR, HELCOM or AMAP data providers.
Specifically, stations are matched by name for Denmark, France (biota and
water - all years; sediment 2009 onwards), Ireland, Norway, Portugal, Spain
(2005 onwards), Sweden, The Netherlands (2007 onwards), United Kingdom. All
other stations are matched by coordinates.</p></li>
<li><p>area: a vector of strings containing one or more of <code>"OSPAR"</code>, <code>"HELCOM"</code>
and <code>"AMAP"</code>; this restricts the stations to those in the corresponding
convention area(s); NULL matches to all stations in the station dictionary</p></li>
<li><p>datatype: a logical specifying whether the stations should be restricted
to those with an appropriate datatype. If <code>TRUE</code>, a contaminant measurement
in biota (for example) will only be matched to stations with
<code>station_datatype</code> containing the string <code>"CF"</code>. Similarly, a biological
effect measurement in biota will only be matched to stations with
<code>station_datatype</code> containing the string <code>"EF"</code></p></li>
<li><p>temporal: a logical with <code>TRUE</code> indicating that stations should be
restricted to those with <code>station_purpm</code> containing the string <code>"T"</code></p></li>
<li><p>governance_type: a string: <code>"none"</code>, <code>"data"</code>, <code>"stations"</code> or <code>"both"</code>.
<code>"none"</code> means data and station governance are both ignored. <code>"data"</code> means
that matching will be restricted by data governance but not station
governance; for example if <code>governance_id == c("OSPAR", "AMAP")</code>, then data
will only be matched to a station if one of <code>is_ospar_monitoring</code> and
<code>is_amap_monitoring</code> is <code>TRUE</code>, with all stations considered regardless of
station governance. <code>"stations"</code> mean that matching will be restricted by
station governance but not by data governance; for example if
<code>governance_id == c("OSPAR", "AMAP")</code>, then the stations will be restricted
to those where <code>station_programgovernance</code> contains either <code>"OSPAR"</code> or
<code>"AMAP"</code>, with all data considered regardless of data governance. <code>both</code>
uses both data and station governance. If <code>governance_id</code> contains a single
value, then the matching is strict. However, if <code>governance_id</code> contains
multiple values, then the matching is more complicated. For example, if
<code>governance_id == c("OSPAR", "AMAP")</code>, then measurements with
<code>is_ospar_monitoring == TRUE</code> and <code>"is_amap_monitoring == FALSE"</code> are
matched to stations where <code>station_programgovernance</code> contains <code>"OSPAR"; measurements with </code>is_ospar_monitoring == FALSE<code>and</code>is_amap_monitoring ==
TRUE<code>are matched with stations where</code>station_programgovernance<code>contains</code>"AMAP"<code>; but measurements where </code>is_ospar_monitoring == TRUE<code>and</code>is_amap_monitoring == TRUE<code>are matched to stations where</code>station_programgovernance<code>contains either</code>"OSPAR"<code>or</code>"AMAP"`.</p></li>
<li><p>governance_id: a vector of strings containing one or more of <code>"OSPAR"</code>,
<code>"HELCOM"</code> and <code>"AMAP"</code>.</p></li>
<li><p>grouping: a logical with <code>TRUE</code> indicating that stations will be grouped
into meta-stations as specified by <code>station_asmtmimeparent</code> in the station
dictionary. Defaults to <code>FALSE</code> apart from when <code>info$purpose == "OSPAR"</code>.</p></li>
<li><p>check_coordinates: a logical with <code>TRUE</code> indicating that, when
stations are matched by name, the sample coordinates must also be within
the station geometry. No implemented yet, so defaults ot <code>FALSE</code>.</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Arctic Monitoring and Assessment Programme (AMAP), Helsinki Commission (HELCOM), OSPAR Commission (OSPAR), International Council for the Exploration of the Sea (ICES), AmbieSense Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p><a href="https://creativecommons.org/licenses/by/4.0/" class="external-link"><img class="cc-badge" src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by.png"></a></p>
</div>

    </footer></div>

  

  

  </body></html>

