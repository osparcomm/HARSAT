<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Reads in contaminant and effects data, the station dictionary and various
reference tables. For data from the ICES webservice, it matches data to
stations in the station dictionary.  It also allows the user to set control
parameters that dictate the assessment process."><title>Read HARSAT data — read_data • harsat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Read HARSAT data — read_data"><meta property="og:description" content="Reads in contaminant and effects data, the station dictionary and various
reference tables. For data from the ICES webservice, it matches data to
stations in the station dictionary.  It also allows the user to set control
parameters that dictate the assessment process."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">harsat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/harsat.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Data file management</h6>
    <a class="dropdown-item" href="../articles/file-management.html">File locations</a>
    <a class="dropdown-item" href="../articles/reference-file-formats.html">Reference file formats</a>
    <a class="dropdown-item" href="../articles/external-file-format.html">External file format</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example_HELCOM.html">HELCOM (read first)</a>
    <a class="dropdown-item" href="../articles/example_OSPAR.html">OSPAR</a>
    <a class="dropdown-item" href="../articles/example_external_data.html">AMAP external data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Additional resources</h6>
    <a class="dropdown-item" href="../articles/datasets.html">Datasets</a>
    <a class="dropdown-item" href="../articles/report-template.html">Report template</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/osparcomm/HARSAT/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Read HARSAT data</h1>
      <small class="dont-index">Source: <a href="https://github.com/osparcomm/HARSAT/blob/HEAD/R/import_functions.R" class="external-link"><code>R/import_functions.R</code></a></small>
      <div class="d-none name"><code>read_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reads in contaminant and effects data, the station dictionary and various
reference tables. For data from the ICES webservice, it matches data to
stations in the station dictionary.  It also allows the user to set control
parameters that dictate the assessment process.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_data</span><span class="op">(</span></span>
<span>  compartment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"biota"</span>, <span class="st">"sediment"</span>, <span class="st">"water"</span><span class="op">)</span>,</span>
<span>  purpose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OSPAR"</span>, <span class="st">"HELCOM"</span>, <span class="st">"AMAP"</span>, <span class="st">"custom"</span><span class="op">)</span>,</span>
<span>  <span class="va">contaminants</span>,</span>
<span>  <span class="va">stations</span>,</span>
<span>  data_dir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  data_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ICES"</span>, <span class="st">"external"</span><span class="op">)</span>,</span>
<span>  info_files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  info_dir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  extraction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  oddity_dir <span class="op">=</span> <span class="st">"oddities"</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>compartment</dt>
<dd><p>A string: <code>"biota"</code>, <code>"sediment"</code> or <code>"water"</code></p></dd>


<dt>purpose</dt>
<dd><p>A string specifying whether to use the default set up for
<code>"OSPAR"</code>, <code>"HELCOM"</code>, or <code>"AMAP"</code> or to use a customised setup <code>"custom"</code></p></dd>


<dt>contaminants</dt>
<dd><p>A file reference for the contaminant data</p></dd>


<dt>stations</dt>
<dd><p>A file reference for the station data</p></dd>


<dt>data_dir</dt>
<dd><p>The directory where the data files can be found (sometimes
supplied using 'file.path'). Defaults to "."; i.e. the working directory.</p></dd>


<dt>data_format</dt>
<dd><p>A string specifying whether the data were extracted from
the ICES webservice (<code>"ICES"</code> - the default) or are in the simplified
format designed for other data sources (<code>"external"</code>).</p></dd>


<dt>info_files</dt>
<dd><p>A list of files specifying reference tables which override
the defaults. See examples.</p></dd>


<dt>info_dir</dt>
<dd><p>The directory where the reference tables can be found
(sometimes supplied using 'file.path'). Defaults to "."; i.e. the working
directory</p></dd>


<dt>extraction</dt>
<dd><p>A date saying when the extraction was made. Optional. This
should be provided according to ISO 8601; for example, 29 February 2024
should be supplied as "2024-02-29". If the contaminant data were extracted
from the ICES webservice and the download file name has not been changed,
the extraction data will be taken from the contaminant file name.</p></dd>


<dt>max_year</dt>
<dd><p>An integer giving the last monitoring year that should be
included in the assessment. Data from monitoring years after <code>max_year</code>
will be deleted. If not specified <code>max_year</code> is taken to be the last
monitoring year in the contaminant data file.</p></dd>


<dt>oddity_dir</dt>
<dd><p>The directory where the 'oddities' will be written
(sometimes supplied using 'file.path'). This directory (and subdirectories)
will be created if it does not already exist.</p></dd>


<dt>control</dt>
<dd><p>A list of control parameters that override the default values
used to run the assessment. These include the reporting window; the way in
which data are matched to stations following an ICES extraction;
information about reporting regions, and so on. See Details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with the following components:</p><ul><li><p><code>call</code> The function call.</p></li>
<li><p><code>info</code> A list containing the reference tables and the control parameters.</p></li>
<li><p><code>data</code> A data frame containing the contaminant (and effects) data. For
<code>external</code> data, this is identical to the input data file apart from some
extra empty columns which have been added. For <code>ICES</code> data, some existing
columns have been renamed (otherwise they are untouched) and some
additional columns have been constructed. The key ones of these are:</p><ul><li><p><code>station_code</code> the code of the station in the station dictionary that
best matches the data</p></li>
<li><p><code>station_name</code> the name of the station</p></li>
<li><p><code>species</code> (biota) the species based on <code>worms_accepted_name</code> where
available and <code>speci_name</code> otherwise</p></li>
<li><p><code>filtration</code> (water) whether the sample was <code>filtered</code> or <code>unfiltered</code>
based on <code>method_pretreatment</code></p></li>
<li><p><code>retain</code> a logical indicating whether each record would have been
retained under the previous ICES extraction protocol. For example, <code>retain</code>
will be <code>FALSE</code> if the vflag entry is <code>"S"</code> or suspect. Records for which
<code>retain == FALSE</code> are deleted later in <code>tidy_data</code></p></li>
</ul></li>
<li><p><code>stations</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<div class="section">
<h3 id="control-parameters">Control parameters<a class="anchor" aria-label="anchor" href="#control-parameters"></a></h3>


<p>Many aspects of the assessment process can be controlled through the
parameters stored in <code>info$control</code>. This is a list populated with default
values which can then be overwritten, if required, using the <code>control</code>
argument.</p>
</div>

<div class="section">
<h3 id="external-data">External data<a class="anchor" aria-label="anchor" href="#external-data"></a></h3>


<p>If <code>data_format = "external"</code>, a simplified data and station file can
be supplied. See <code><a href="../articles/external-file-format.html">vignette("external-file-format")</a></code> for details.</p>
</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Arctic Monitoring and Assessment Programme (AMAP), Helsinki Commission (HELCOM), OSPAR Commission (OSPAR), International Council for the Exploration of the Sea (ICES), AmbieSense Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p><a href="https://creativecommons.org/licenses/by/4.0/" class="external-link"><img class="cc-badge" src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by.png"></a></p>
</div>

    </footer></div>

  

  

  </body></html>

